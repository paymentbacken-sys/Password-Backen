<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Email Access</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6fb;
  padding:20px;
}

h2{
  text-align:center;
}

.class-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(160px,1fr));
  gap:12px;
  margin-bottom:20px;
}

.class-btn{
  background:#2c3e50;
  color:white;
  padding:12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}

.class-btn:hover{
  background:#34495e;
}

.sub-grid{
  display:none;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
  gap:10px;
  margin-bottom:20px;
}

.sub-btn{
  background:#3498db;
  color:white;
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

.sub-btn.study{ background:#27ae60; }
.sub-btn.practice{ background:#e67e22; }

.sub-btn:disabled{
  background:#bdc3c7;
  cursor:not-allowed;
}

#email{
  font-size:18px;
  color:green;
  font-weight:bold;
  text-align:center;
}

#message{
  text-align:center;
  color:red;
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>

<body>

<h2>Email Access Portal</h2>

<!-- CLASS BUTTONS -->
<div class="class-grid">
  <button class="class-btn" onclick="showClass('class9')">Class 9</button>
  <button class="class-btn" onclick="showClass('class10')">Class 10</button>
  <button class="class-btn" onclick="showClass('class11')">Class 11</button>
  <button class="class-btn" onclick="showClass('class12')">Class 12</button>
  <button class="class-btn" onclick="showClass('iitjee')">IIT-JEE</button>
  <button class="class-btn" onclick="showClass('neet')">NEET</button>
</div>

<!-- SUBJECT BUTTONS -->
<div id="subjects" class="sub-grid"></div>

<p id="email"></p>
<p id="message"></p>

<script>
let alreadyUsed = false;

const classButtons = document.querySelectorAll(".class-btn");

const data = {
  class9: [
    {id:"class9_science_practice", label:"Science â€“ Practice", type:"practice"},
    {id:"class9_science_study", label:"Science â€“ Study", type:"study"},
    {id:"class9_math_practice", label:"Math â€“ Practice", type:"practice"},
    {id:"class9_math_study", label:"Math â€“ Study", type:"study"},
  ],
  class10: [
    {id:"class10_science_practice", label:"Science â€“ Practice", type:"practice"},
    {id:"class10_science_study", label:"Science â€“ Study", type:"study"},
    {id:"class10_math_practice", label:"Math â€“ Practice", type:"practice"},
    {id:"class10_math_study", label:"Math â€“ Study", type:"study"},
  ],
  class11: [
    {id:"class11_physics_practice", label:"Physics â€“ Practice", type:"practice"},
    {id:"class11_physics_study", label:"Physics â€“ Study", type:"study"},
    {id:"class11_chemistry_practice", label:"Chemistry â€“ Practice", type:"practice"},
    {id:"class11_chemistry_study", label:"Chemistry â€“ Study", type:"study"},
    {id:"class11_math_practice", label:"Math â€“ Practice", type:"practice"},
    {id:"class11_math_study", label:"Math â€“ Study", type:"study"},
    {id:"class11_biology_practice", label:"Biology â€“ Practice", type:"practice"},
    {id:"class11_biology_study", label:"Biology â€“ Study", type:"study"},
  ],
  class12: [
    {id:"class12_physics_practice", label:"Physics â€“ Practice", type:"practice"},
    {id:"class12_physics_study", label:"Physics â€“ Study", type:"study"},
    {id:"class12_chemistry_practice", label:"Chemistry â€“ Practice", type:"practice"},
    {id:"class12_chemistry_study", label:"Chemistry â€“ Study", type:"study"},
    {id:"class12_math_practice", label:"Math â€“ Practice", type:"practice"},
    {id:"class12_math_study", label:"Math â€“ Study", type:"study"},
    {id:"class12_biology_practice", label:"Biology â€“ Practice", type:"practice"},
    {id:"class12_biology_study", label:"Biology â€“ Study", type:"study"},
  ],
  iitjee: [
    {id:"iitjee_physics_practice", label:"Physics â€“ Practice", type:"practice"},
    {id:"iitjee_physics_study", label:"Physics â€“ Study", type:"study"},
    {id:"iitjee_chemistry_practice", label:"Chemistry â€“ Practice", type:"practice"},
    {id:"iitjee_chemistry_study", label:"Chemistry â€“ Study", type:"study"},
    {id:"iitjee_math_practice", label:"Math â€“ Practice", type:"practice"},
    {id:"iitjee_math_study", label:"Math â€“ Study", type:"study"},
  ],
  neet: [
    {id:"neet_physics_practice", label:"Physics â€“ Practice", type:"practice"},
    {id:"neet_physics_study", label:"Physics â€“ Study", type:"study"},
    {id:"neet_chemistry_practice", label:"Chemistry â€“ Practice", type:"practice"},
    {id:"neet_chemistry_study", label:"Chemistry â€“ Study", type:"study"},
    {id:"neet_biology_practice", label:"Biology â€“ Practice", type:"practice"},
    {id:"neet_biology_study", label:"Biology â€“ Study", type:"study"},
  ]
};

function showClass(cls){
  if(alreadyUsed) return;

  const box = document.getElementById("subjects");
  box.innerHTML = "";
  box.style.display = "grid";

  data[cls].forEach(s=>{
    const b = document.createElement("button");
    b.className = `sub-btn ${s.type}`;
    b.innerText = s.label;
    b.onclick = ()=>getEmail(s.id);
    box.appendChild(b);
  });
}

function getEmail(category){
  if(alreadyUsed) return;

  fetch(`/email?category=${category}`)
    .then(r=>r.json())
    .then(d=>{
      document.getElementById("email").innerText = d.email || d.message;
      document.getElementById("message").innerText =
        "You have permission for only one registered email.";

      // ðŸ”’ Disable ALL subject buttons
      document.querySelectorAll(".sub-btn").forEach(b=>b.disabled=true);

      // ðŸ”’ Disable ALL class buttons
      classButtons.forEach(b=>b.disabled=true);

      alreadyUsed = true;
    })
    .catch(()=>{
      document.getElementById("message").innerText = "Server error";
    });
}
</script>


</body>
</html>
